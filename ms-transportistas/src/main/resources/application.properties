spring.profiles.default=dev
spring.application.name=ms-transportistas
server.port=${MS_TRANSPORTISTAS_PORT:8083}
eureka.client.service-url.defaultZone=${EUREKA_URL:http://localhost:8761/eureka}
spring.datasource.url=${MS_TRANSPORTISTAS_DB_URL:jdbc:postgresql://localhost:5432/dbtransportista}
spring.datasource.username=${MS_TRANSPORTISTAS_DB_USERNAME:postgres}
spring.datasource.password=${MS_TRANSPORTISTAS_DB_PASSWORD:1234}
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
eureka.instance.prefer-ip-address=true
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true

feign.client.config.default.connect-timeout=3000
feign.client.config.default.read-timeout=5000
feign.client.config.default.logger-level=basic

resilience4j.circuitbreaker.instances.userService.register-health-indicator=true
resilience4j.circuitbreaker.instances.userService.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.userService.sliding-window-size=10
resilience4j.circuitbreaker.instances.userService.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.userService.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.userService.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.userService.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.userService.automatic-transition-from-open-to-half-open-enabled=true
resilience4j.circuitbreaker.instances.userService.event-consumer-buffer-size=100
resilience4j.circuitbreaker.instances.userService.record-exceptions=feign.RetryableException,java.net.ConnectException,java.net.SocketTimeoutException,com.transporte.mstransportistas.domain.exception.ExternalServiceException
resilience4j.retry.instances.userServiceRetry.max-attempts=3
resilience4j.retry.instances.userServiceRetry.wait-duration=500ms
resilience4j.retry.instances.userServiceRetry.enable-exponential-backoff=true
resilience4j.retry.instances.userServiceRetry.exponential-backoff-multiplier=2
resilience4j.retry.instances.userServiceRetry.register-health-indicator=true
resilience4j.retry.instances.userServiceRetry.event-consumer-buffer-size=100
resilience4j.retry.instances.userServiceRetry.retry-exceptions=com.transporte.mstransportistas.domain.exception.ExternalServiceException
resilience4j.retry.instances.userServiceRetry.ignore-exceptions=feign.FeignException$NotFound,java.lang.IllegalArgumentException

spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:admin}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:admin}
spring.rabbitmq.connection-timeout=5000

rabbitmq.exchange.transport=transport.exchange
rabbitmq.queue.transport-created=transport.created.queue
rabbitmq.queue.transport-status-changed=transport.status.changed.queue
rabbitmq.queue.transport-assigned=transport.assigned.queue
rabbitmq.routing-key.transport-created=transport.created
rabbitmq.routing-key.transport-status-changed=transport.status.changed
rabbitmq.routing-key.transport-assigned=transport.assigned

logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} level=%-5level service=${spring.application.name} corr=%X{correlationId:-N/A} [%thread] %logger - %msg%n
logging.level.com.transporte.mstransportistas=INFO

management.endpoints.web.exposure.include=health,info,metrics,prometheus,circuitbreakers,circuitbreakerevents,retries,retryevents
management.endpoint.health.probes.enabled=true
management.health.circuitbreakers.enabled=true
